<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>JS Rock Paper Scissors</title>
</head>
<body>
  <script>
    'use strict';
    // Computer randomly chooses rock/paper/scissors
    const computerPlay = () => {
      let roll = Math.floor(Math.random() * 3);
      let choice = ""
      switch(roll) {
        case roll = 0:
          choice = "Rock";
          break;
        case roll = 1: 
          choice = "Scissors";
          break;
        case roll = 2:
          choice = "Paper";
      }
      return choice;
    }

    const singleRound = () => {
      // Prompt player for choice
      let playerChoice = prompt("Rock, paper, or scissors?");
      // Make player entry case insensitive
      let playerSelection = playerChoice[0].toUpperCase().concat(playerChoice.substring(1).toLowerCase());
      // Call computerPlay for computer selection
      let computerSelection = computerPlay();

      // If player and computer tie, alert and return tie
      if (playerSelection == computerSelection) {
        alert(`You tied! ${playerSelection} ties ${computerSelection}`);
        return 'tie';
      } 
      // If player beats computer, alert and return win
      else if ((playerSelection == "Rock" && computerSelection == "Scissors") || (playerSelection == "Scissors" && computerSelection == "Paper") || (playerSelection == "Paper" && computerSelection == "Rock")) {
        alert(`You won! ${playerSelection} beats ${computerSelection}`);
        return 'win';
      } 
      // If computer beats player, alert and return loss
      else {
        alert(`You lost! ${playerSelection} loses to ${computerSelection}`);
        return 'loss';
      }
    }
    
    const game = () => {
      // Prompt user for number of games to play
      let n = Number(prompt("How many games would you like to play?"));
      // Initialize my score and computer score
      let myScore = 0, computerScore = 0;
      // Each round call singleRound(); with result stored as return value
      for(let i = 0; i < n; i++) {
        let result = singleRound();
        if (result == "win") {
          myScore++;
        } else if (result == "loss") {
          computerScore++;
        } else {
          continue;
        }
      }
      // Alert user to whether they won or lost more games, and the score
      if (myScore > computerScore) {
        alert(`You won! Your score was ${myScore} games out of ${n}!`);
      } else if (myScore < computerScore) {
        alert(`You lost! Your score was ${myScore} games out of ${n}!`);
      } else {
        alert(`It's a tie! You both won ${myScore} games out of ${n}!`);
      }
    }
  </script>
</body>
</html>